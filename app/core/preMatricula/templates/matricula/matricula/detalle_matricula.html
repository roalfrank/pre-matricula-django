{% load static %}
{% load filterCustom %}
{% load humanize%}
<div class="row">
  <div class="col-12 col-lg-8 col-md-8">
    <div class="card ">
      <div class="card-header">
        <div class="user-block">
          <img class="img-circle" src="{{object.curso.get_foto}}" alt="User Image">
          <span class="username">
            <h5>{{object.curso.nombre}}</h5>
          </span>
          <span class="description ">Estado - <span
              class="badge {% if object.estado.nombre == 'abierto' %} badge-success {% elif object.estado.nombre == 'en proceso' %}badge-warning {% else %} badge-danger {%endif %}">{{object.estado.nombre}}</span>
          </span>
        </div>
        <div class="float-right">
          <span class="badge badge-success">{{object.tipo_grupo.nombre }}</span>
        </div>
      </div>
      <div class="card-body">

        <div class="card bg-info">
          <div class="card-header p-0 pl-2">
            <div class="title"><strong> Descripcion</strong></div>
          </div>
          <div class="card-body ">
            {{object.curso.descripcion}}
          </div>
        </div>
        <div class="row">
          <div class="col-12">
            <div class="card bg-info">
              <div class="card-header p-0 pl-2">
                <div class="title"><strong> Profesores</strong></div>
              </div>
              <div class="card-body text-center bg-info">
                <div class="d-flex justify-content-around flex-wrap">
                  {% for profe in object.prematriculamaestro_set.all %}
                  <div class="card ">
                    <div class="card-body text-center ">
                      <p><img class="img-circle elevation-2" src="{{profe.maestro.instructor.usuario.perfil.get_image}}"
                          alt="card image" width="50px" height="50px"></p>
                      <small>{{profe.maestro.get_nombre}}</small>
                      <p class="card-text">{{profe.maestro.instructor.cargo.nombre}}</p>
                      <a href="#" class="badge badge-info navbar-badge mr-2 " style="font-size: 0.8rem;"
                        data-html="true" data-placement="top" data-popover-content="#unique-{{profe.pk}}"
                        data-toggle="popover" data-trigger="focus"><strong>info</strong></a>
                      <!-- Content for Popover #1 -->
                      <div id="unique-{{profe.pk}}" style="display:none;">
                        <div class="popover-heading">{{profe.maestro.get_nombre}}</div>
                        <div class="popover-body ">
                          <ul class="list-group list-group-unbordered mb-3 p-2">
                            <li class="list-group-item">
                              <b>
                                JCB:
                              </b>
                              <span
                                class='badge badge-info float-right'>{{profe.maestro.instructor.jcb.entidad.nombre}}</span>
                            </li>
                            <li class="list-group-item">
                              <b>
                                Correo:
                              </b>
                              <span
                                class='badge badge-info float-right mt-4'>{{profe.maestro.instructor.usuario.perfil.correo}}</span>
                            </li>
                            <li class="list-group-item">
                              <b>
                                Cursos impartidos:
                              </b>
                              <span
                                class='badge badge-info float-right'>{{profe.maestro.prematriculamaestro_set.all.count }}
                              </span>
                            </li>
                            <li class="list-group-item">
                              <b>
                                Conocimiento:
                              </b>
                              <span class='badge badge-info float-right mt-4 '>python,django,html</span>
                            </li>
                          </ul>
                        </div>
                      </div>
                    </div>
                  </div>
                  {% endfor %}
                </div>
              </div>
            </div>
          </div>
        </div>


      </div>
    </div>
  </div>
  <div class="col-12 col-lg-4 col-md-4">
    <div class="card ">
      <div class="card-header ">
        <div class="title"><strong> Información</strong></div>
      </div>
      <div class="card-body ">
        <ul class="list-group list-group-unbordered mb-3">
          <li class="list-group-item">
            <b><img src="{% static 'img/iconos/fecha.png' %}" alt="Fecha Inicio" style="width: 1.5rem;" srcset="">
              Inicio:</b>
            <span class='badge badge-success float-right mt-1 mr-1'>{{object.fecha_inicio}}</span>
          </li>
          <li class="list-group-item">
            <b><img src="{% static 'img/iconos/fecha.png' %}" alt="Fecha fin" style="width: 1.5rem;" srcset=""> Fin:</b>
            <span class='badge badge-danger float-right mt-1 mr-1'>{{object.fecha_fin}}</span>
          </li>
          <li class="list-group-item">
            <b><i class="fa fa-users"></i> Capacidad</b> <a
              class="float-right "><strong>{{cantAlumnos}}/{{object.capacidad}}</strong>(<span
                style="color: rgb(42, 44, 43); font-weight: bolder;">{{promedioCantidad}}%</span>)</a>
            <div class="progress progress-sm">
              <div class="progress-bar  bg-success" style="width:{{ promedioCantidad|floatformat:0 }}%;"></div>
            </div>

          </li>
          <li class="list-group-item">
            <b>Modalidad:</b>
            <span class="float-right"><span>{{ object.modalidad.nombre }}</span></span>
          </li>
          <li class="list-group-item">
            <b>Frecuencia:</b>
            <span class="float-right"><span class="badge badge-warning">{{ object.frecuencia }} semanal</span></span>
          </li>
          <li class="list-group-item">
            <b>QR:</b><br>
            <div class="row justify-content-center align-items-center">
              <img src="{% static 'img/iconos/qr.png' %}" alt="Fecha fin" style="width: 5rem;" srcset="">
            </div>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-12">
    <div class="card  text-white bg-info">
      <div class="card-header p-0 pl-2">
        <div class="title"><strong> Estudiantes matriculados</strong></div>
      </div>
      <div class="card-body p-0">
        <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
          <div class="carousel-inner pt-2">
            {% for item in listaAlumnos %}
            <div class="carousel-item {% if forloop.first %}active{% endif %} ">
              <ul class="users-list clearfix">
                {% for estudiante in item %}
                <li>
                  <img src="{{estudiante.estudiante.usuario.perfil.get_image}}" alt="Imagen de usuario"
                    style="max-width: 30%;">
                  <span class="users-list-name text-white">{{estudiante.estudiante.usuario.username}}</span>
                  <span class="users-list-date"></span>
                </li>
                {% endfor %}

              </ul>
            </div>
            {% endfor %}
          </div>
          <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev"
            style="width: 5%;">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
          </a>
          <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next"
            style="width: 5%;">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
          </a>
        </div>

      </div>
    </div>
  </div>
</div>
<div class="row">
  <div class="col-12 ">
    <div class="card">
      <div class="card-header">
        <div class="card-tool">
          <button type="button" class="btn btn-default btn-sm"><i class="fas fa-share"></i> Compartir</button>
          <button type="button" class="btn {% if is_liked %} btn-info {% else %} btn-default {% endif %}btn-sm"
            id="like_button" value="{{ object.pk }}"><i class="far fa-thumbs-up"></i> Me gusta</button>
          <span class="float-right text-muted"><span id='cantidad_like'>{{ total_likes }}</span> Me gusta - <span
              id='cantidad_comentario'>{{ object.numero_comentario }}</span> comentarios</span>
        </div>
      </div>
      <div class="card-body text-success">
        <div class="card-footer card-comments">
          <table id="tabla_comentario" class="display" style="width:100%">
            <thead>
              <tr>
                <th></th>
              </tr>
            </thead>
            <tbody>
              {% for comentario in lista_comentarios %}
               <tr>
                <td>
                  <div class="card-comment">
                    <!-- User image -->
                    <img class="img-circle img-sm" src="{{comentario.usuario.perfil.get_image}}" alt="User Image">
        
                    <div class="comment-text">
                      <span class="username">
                        {{comentario.usuario.username}}
                        <span class="text-muted float-right">{{comentario.fecha_comentario|naturaltime}}</span>
                      </span><!-- /.username -->
                      {{comentario.texto}}
                    </div>
                    <!-- /.comment-text -->
                    {% comentario_hijos request comentario as listaHijos %}
                    <div class="card collapsed-card m-0 ml-4  ">
                      <div class="card-header p-0 pr-2 pl-2">
                        <div class="card-title">
                          <small>{{ listaHijos.count}} Respuestas</small>
                        </div>
                        <div class="card-tools">
                          <button type="button" class="btn btn-tool" data-card-widget="collapse">
                            <i class="fas fa-plus"></i>
                          </button>
                        </div>
                      </div>
                      <div class="card-body">
                        <small>
                          {% for hijo in listaHijos %}
                          <div class="card-comment">
                            <!-- User image -->
                            <img class="img-circle img-sm" src="{{ hijo.usuario.perfil.get_image }}" alt="User Image">
        
                            <div class="comment-text">
                              <span class="username">
                                {{ hijo.usuario.username }}
                                <span class="text-muted float-right">{{ hijo.fecha_comentario|naturaltime }}</span>
                              </span><!-- /.username -->
                              {{ hijo.texto }}
                            </div>
                            <!-- /.comment-text -->
                          </div>
                          {% endfor %}
                          <form action="#" method="post">
                            <img class="img-fluid img-circle img-sm" src="{{ request.user.perfil.get_image }}" alt="Alt Text">
                            <!-- .img-push is used to add margin to elements next to floating images -->
                            <div class="img-push">
                              <input type="text" class="form-control form-control-sm"
                                placeholder="Presione enter para comentar">
                            </div>
                          </form>
                        </small>
                      </div>
                    </div>
                  </div>
                </td>
              </tr>
          {% endfor %}
             
            </tbody>
          </table>
          
          <!-- /.card-comment -->
        </div>

      </div>

      <div class="card-footer">
        <form action="#" method="post">
          <img class="img-fluid img-circle img-sm" src="{{ request.user.perfil.get_image }}" alt="Alt Text">
          <!-- .img-push is used to add margin to elements next to floating images -->
          <div class="img-push">
            <input type="text" class="form-control form-control-sm" placeholder="Presione enter para comentar">
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
<div class="row">
  <div class="col-12">
    <div class="card">
      <div class="card-header ">
        <div class="title">Cursos relacionados o de interés</div>
      </div>

      <div class="card-body">
        <div class="d-flex justify-content-around flex-wrap">
          <div class="card card-widget widget-user w-25">
            <div class="ribbon-wrapper ">
              <div class="ribbon bg-success">nuevo</div>
            </div>
            <!-- Add the bg color to the header using any of the bg-* classes -->
            <div class="widget-user-header bg-info">
              <h3 class="widget-user-username">Curso sistema operativo Windows</h3>
              <!-- <h5 class="widget-user-desc">San Miguel del Padron</h5> -->
            </div>
            <div class="btn-detalles-curso">
              <button href="" class="btn bg-transparent text-white"><i class="fas fa-info"></i></button>
            </div>
            <div class="btn-matricular">
              <button href="" class="btn bg-transparent text-white"><i class="fas fa-graduation-cap"
                  aria-hidden="true"></i></button>
            </div>
            <div class="widget-user-image">
              <img class="img-circle elevation-2 img-curso-panel " src="/static/img/windows.png" alt="User Avatar">
            </div>
            <div class="">
              <img class="img-responsive ml-4" src="{% static 'img/iconos/qr.png' %}" alt="qr codigo" width="50"
                height="50">
            </div>
            <div class="card-footer p-0">
              <div class="row">
                <div class="col-4 border-right">
                  <div class="description-block">
                    <h5 class="description-header text-xs">24h</h5>
                    <span class="description-text text-xs"><i class="fa fa-clock" aria-hidden="true"></i></span>
                  </div>
                  <!-- /.description-block -->
                </div>
                <!-- /.col -->
                <div class="col-4 border-right">
                  <div class="description-block">
                    <h5 class="description-header text-xs">04/05/21</h5>
                    <span class="description-text text-xs text-success ">Inicio</span>
                  </div>
                  <!-- /.description-block -->
                </div>
                <!-- /.col -->
                <div class="col-4">
                  <div class="description-block">
                    <h5 class="description-header text-xs">04/06/21</h5>
                    <span class="description-text text-xs text-danger ">fin</span>
                  </div>
                  <!-- /.description-block -->
                </div>
                <!-- /.col -->
              </div>
              <!-- /.row -->
            </div>
          </div>
          <div class="card card-widget widget-user w-25">
            <div class="ribbon-wrapper ">
              <div class="ribbon bg-danger">+ 50 %</div>
            </div>
            <!-- Add the bg color to the header using any of the bg-* classes -->
            <div class="widget-user-header bg-info">
              <h3 class="widget-user-username">Curso sistema operativo Windows</h3>
              <!-- <h5 class="widget-user-desc">San Miguel del Padron</h5> -->
            </div>
            <div class="btn-detalles-curso">
              <button href="" class="btn bg-transparent text-white"><i class="fas fa-info"></i></button>
            </div>
            <div class="btn-matricular">
              <button href="" class="btn bg-transparent text-white"><i class="fas fa-graduation-cap"
                  aria-hidden="true"></i></button>
            </div>
            <div class="widget-user-image">
              <img class="img-circle elevation-2 img-curso-panel " src="/static/img/windows.png" alt="User Avatar">
            </div>
            <div class="">
              <img class="img-responsive ml-4" src="{% static 'img/iconos/qr.png' %}" alt="qr codigo" width="50"
                height="50">
            </div>
            <div class="card-footer p-0">
              <div class="row">
                <div class="col-4 border-right">
                  <div class="description-block">
                    <h5 class="description-header text-xs">24h</h5>
                    <span class="description-text text-xs"><i class="fa fa-clock" aria-hidden="true"></i></span>
                  </div>
                  <!-- /.description-block -->
                </div>
                <!-- /.col -->
                <div class="col-4 border-right">
                  <div class="description-block">
                    <h5 class="description-header text-xs">04/05/21</h5>
                    <span class="description-text text-xs text-success ">Inicio</span>
                  </div>
                  <!-- /.description-block -->
                </div>
                <!-- /.col -->
                <div class="col-4">
                  <div class="description-block">
                    <h5 class="description-header text-xs">04/06/21</h5>
                    <span class="description-text text-xs text-danger ">fin</span>
                  </div>
                  <!-- /.description-block -->
                </div>
                <!-- /.col -->
              </div>
              <!-- /.row -->
            </div>
          </div>
          <div class="card card-widget widget-user card-front w-25">
            <div class="ribbon-wrapper ">
              <div class="ribbon bg-danger">+ 50 %</div>
            </div>
            <!-- Add the bg color to the header using any of the bg-* classes -->
            <div class="widget-user-header bg-info">
              <h3 class="widget-user-username">Curso sistema operativo Windows</h3>
              <!-- <h5 class="widget-user-desc">San Miguel del Padron</h5> -->
            </div>
            <div class="btn-detalles-curso">
              <button href="" class="btn bg-transparent text-white"><i class="fas fa-info"></i></button>
            </div>
            <div class="btn-matricular">
              <button href="" class="btn bg-transparent text-white"><i class="fas fa-graduation-cap"
                  aria-hidden="true"></i></button>
            </div>
            <div class="widget-user-image">
              <img class="img-circle elevation-2 img-curso-panel " src="/static/img/windows.png" alt="User Avatar">
            </div>
            <div class="">
              <img class="img-responsive ml-4" src="{% static 'img/iconos/qr.png' %}" alt="qr codigo" width="50"
                height="50">
            </div>
            <div class="card-footer p-0">
              <div class="row">
                <div class="col-4 border-right">
                  <div class="description-block">
                    <h5 class="description-header text-xs">24h</h5>
                    <span class="description-text text-xs"><i class="fa fa-clock" aria-hidden="true"></i></span>
                  </div>
                  <!-- /.description-block -->
                </div>
                <!-- /.col -->
                <div class="col-4 border-right">
                  <div class="description-block">
                    <h5 class="description-header text-xs">04/05/21</h5>
                    <span class="description-text text-xs text-success ">Inicio</span>
                  </div>
                  <!-- /.description-block -->
                </div>
                <!-- /.col -->
                <div class="col-4">
                  <div class="description-block">
                    <h5 class="description-header text-xs">04/06/21</h5>
                    <span class="description-text text-xs text-danger ">fin</span>
                  </div>
                  <!-- /.description-block -->
                </div>
                <!-- /.col -->
              </div>
              <!-- /.row -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>